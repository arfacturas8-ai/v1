# ==============================================
# CRYB PLATFORM - PUSH NOTIFICATIONS CONFIG
# ==============================================
# Copy this file to .env and fill in your values

# Basic Configuration
NODE_ENV=development
API_PORT=3002
API_BASE_URL=http://localhost:3002

# ==============================================
# FIREBASE CLOUD MESSAGING (FCM) CONFIGURATION
# ==============================================

# Enable/disable FCM
FCM_ENABLED=true

# Firebase Admin SDK credentials
FCM_PROJECT_ID=your-firebase-project-id
FCM_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nYour private key here\n-----END PRIVATE KEY-----"
FCM_CLIENT_EMAIL=firebase-adminsdk-xxxxx@your-project.iam.gserviceaccount.com

# FCM Web Configuration (for web push)
FCM_WEB_API_KEY=your-web-api-key
FCM_WEB_AUTH_DOMAIN=your-project.firebaseapp.com
FCM_WEB_PROJECT_ID=your-firebase-project-id
FCM_WEB_STORAGE_BUCKET=your-project.appspot.com
FCM_WEB_MESSAGING_SENDER_ID=123456789012
FCM_WEB_APP_ID=1:123456789012:web:abcdef123456

# ==============================================
# APPLE PUSH NOTIFICATION SERVICE (APNS) CONFIG
# ==============================================

# Enable/disable APNS
APNS_ENABLED=true

# Apple Developer credentials
APNS_KEY_ID=your-key-id
APNS_TEAM_ID=your-team-id
APNS_BUNDLE_ID=ai.cryb.app
APNS_PRIVATE_KEY_PATH=/path/to/your/AuthKey_XXXXXXXXXX.p8
APNS_ENVIRONMENT=development

# ==============================================
# EXPO PUSH NOTIFICATIONS
# ==============================================

# Expo Access Token for push notifications
EXPO_ACCESS_TOKEN=your-expo-access-token
EXPO_PROJECT_ID=your-expo-project-id

# ==============================================
# WEB PUSH (VAPID) CONFIGURATION
# ==============================================

# VAPID keys for web push notifications
# Generate these with: npx web-push generate-vapid-keys
VAPID_PUBLIC_KEY=your-vapid-public-key
VAPID_PRIVATE_KEY=your-vapid-private-key
VAPID_SUBJECT=mailto:support@cryb.ai

# ==============================================
# NOTIFICATION QUEUE CONFIGURATION
# ==============================================

# Redis configuration for notification queues
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=your-redis-password
REDIS_DB=0

# Queue settings
NOTIFICATION_QUEUE_CONCURRENCY=5
NOTIFICATION_BATCH_SIZE=100
NOTIFICATION_BATCH_DELAY=100
NOTIFICATION_MAX_RETRIES=3
NOTIFICATION_RETRY_DELAY=2000

# Rate limiting
NOTIFICATION_RATE_LIMIT_MAX=1000
NOTIFICATION_RATE_LIMIT_WINDOW=60000

# ==============================================
# NOTIFICATION BEHAVIOR SETTINGS
# ==============================================

# Default notification settings
DEFAULT_NOTIFICATION_PRIORITY=normal
DEFAULT_NOTIFICATION_SOUND=default
DEFAULT_NOTIFICATION_TTL=86400

# Quiet hours default settings
DEFAULT_QUIET_HOURS_START=22:00
DEFAULT_QUIET_HOURS_END=08:00
DEFAULT_TIMEZONE=UTC

# Batch processing settings
BULK_NOTIFICATION_MAX_USERS=10000
BULK_NOTIFICATION_BATCH_SIZE=50
BULK_NOTIFICATION_DELAY=1000

# ==============================================
# FEATURE FLAGS
# ==============================================

# Feature toggles
ENABLE_WEB_PUSH=true
ENABLE_MOBILE_PUSH=true
ENABLE_EMAIL_NOTIFICATIONS=true
ENABLE_SMS_NOTIFICATIONS=false
ENABLE_PUSH_ANALYTICS=true
ENABLE_NOTIFICATION_TEMPLATES=true
ENABLE_SCHEDULED_NOTIFICATIONS=true

# Development settings
ENABLE_MOCK_NOTIFICATIONS=false
LOG_NOTIFICATION_PAYLOADS=false
ENABLE_NOTIFICATION_DEBUGGING=false

# ==============================================
# THIRD-PARTY INTEGRATIONS
# ==============================================

# Email service (for fallback notifications)
EMAIL_SERVICE_PROVIDER=sendgrid
EMAIL_API_KEY=your-email-api-key
EMAIL_FROM_ADDRESS=notifications@cryb.ai
EMAIL_FROM_NAME=CRYB Platform

# SMS service (optional)
SMS_SERVICE_PROVIDER=twilio
SMS_ACCOUNT_SID=your-twilio-account-sid
SMS_AUTH_TOKEN=your-twilio-auth-token
SMS_FROM_NUMBER=+1234567890

# Analytics and monitoring
SENTRY_DSN=your-sentry-dsn
ANALYTICS_ENABLED=true
METRICS_ENABLED=true

# ==============================================
# SECURITY SETTINGS
# ==============================================

# API rate limiting
API_RATE_LIMIT_MAX=100
API_RATE_LIMIT_WINDOW=60000

# Authentication
JWT_SECRET=your-jwt-secret
JWT_EXPIRES_IN=7d

# Encryption (for sensitive notification data)
NOTIFICATION_ENCRYPTION_KEY=your-32-character-encryption-key
DEVICE_TOKEN_ENCRYPTION=true

# ==============================================
# MONITORING AND LOGGING
# ==============================================

# Log levels
LOG_LEVEL=info
NOTIFICATION_LOG_LEVEL=debug

# Metrics collection
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090

# Health check endpoints
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_PATH=/health

# ==============================================
# DATABASE CONFIGURATION
# ==============================================

# PostgreSQL (for notification history and preferences)
DATABASE_URL=postgresql://username:password@localhost:5432/cryb_platform
DATABASE_POOL_SIZE=10
DATABASE_TIMEOUT=30000

# ==============================================
# PERFORMANCE SETTINGS
# ==============================================

# Memory limits
MAX_MEMORY_USAGE=512MB
MAX_CONCURRENT_NOTIFICATIONS=1000

# Timeout settings
NOTIFICATION_TIMEOUT=30000
QUEUE_PROCESSING_TIMEOUT=60000
HTTP_TIMEOUT=10000

# Cleanup settings
CLEANUP_INTERVAL=3600000
NOTIFICATION_HISTORY_RETENTION_DAYS=30
FAILED_NOTIFICATION_RETENTION_DAYS=7

# ==============================================
# DEVELOPMENT SETTINGS
# ==============================================

# Development mode settings
DEV_MOCK_PUSH_SERVICES=false
DEV_LOG_ALL_NOTIFICATIONS=true
DEV_SKIP_RATE_LIMITING=false
DEV_USE_TEST_TOKENS=false

# Test notification settings
TEST_NOTIFICATION_USER_ID=test-user-id
TEST_DEVICE_TOKEN=test-device-token

# ==============================================
# PRODUCTION SETTINGS
# ==============================================

# Production optimizations
PRODUCTION_MODE=false
ENABLE_CLUSTERING=false
CLUSTER_WORKERS=4

# Scaling settings
AUTO_SCALE_WORKERS=false
MAX_QUEUE_SIZE=10000
QUEUE_OVERFLOW_STRATEGY=reject

# ==============================================
# BACKUP AND RECOVERY
# ==============================================

# Notification data backup
BACKUP_NOTIFICATIONS=true
BACKUP_INTERVAL=86400000
BACKUP_RETENTION_DAYS=30
BACKUP_LOCATION=/backups/notifications

# ==============================================
# COMPLIANCE AND PRIVACY
# ==============================================

# GDPR compliance
GDPR_COMPLIANCE_MODE=true
DATA_RETENTION_PERIOD=2555
ANONYMIZE_OLD_DATA=true

# Privacy settings
ENCRYPT_NOTIFICATION_CONTENT=true
ANONYMIZE_DEVICE_TOKENS=false
LOG_PERSONAL_DATA=false

# ==============================================
# NOTIFICATION CONTENT SETTINGS
# ==============================================

# Content limits
MAX_TITLE_LENGTH=100
MAX_BODY_LENGTH=500
MAX_DATA_SIZE=4096

# Localization
DEFAULT_LOCALE=en-US
ENABLE_LOCALIZATION=true
SUPPORTED_LOCALES=en-US,es-ES,fr-FR,de-DE

# Content filtering
ENABLE_CONTENT_FILTERING=true
PROFANITY_FILTER_ENABLED=true
SPAM_DETECTION_ENABLED=true

# ==============================================
# WEBHOOK SETTINGS
# ==============================================

# Delivery status webhooks
WEBHOOK_ENABLED=false
WEBHOOK_URL=https://your-app.com/webhooks/notifications
WEBHOOK_SECRET=your-webhook-secret
WEBHOOK_TIMEOUT=10000

# ==============================================
# NOTES
# ==============================================

# 1. Generate VAPID keys with: npx web-push generate-vapid-keys
# 2. Firebase private key should be a single line with \n characters
# 3. Redis is required for notification queues
# 4. All times are in milliseconds unless specified
# 5. Set PRODUCTION_MODE=true for production deployment
# 6. Review security settings before production deployment