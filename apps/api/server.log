
> @cryb/api@0.0.1 dev
> tsx watch src/index.ts

âš ï¸  Using development JWT secret. Change in production!
Transak API key not configured. Payment functionality will be limited.
ğŸ¤– Initializing AI integration service...
âœ… OpenAI client initialized successfully
âœ… NLP tools initialized successfully
ğŸ¤– AI Integration Service initialized successfully
ğŸ” Initializing detection services...
ğŸ¤– ML models initialized for spam detection
ğŸ§  Emotion classifier initialized
âš¡ Initializing enhancement services...
ğŸ§  Smart tagging service initialized
ğŸ“‹ Loaded 2 blacklisted addresses
ğŸ” Real-time fraud monitoring started
ğŸ¤– Initializing auto-moderation engine...
ğŸ”¨ Initializing automated ban system...
ğŸ” Automated ban system monitoring started
âœ… All moderation services initialized successfully
ğŸš€ Enhanced Moderation Service initialized successfully
âœ… Enhanced Moderation Service initialized for moderation routes
ğŸ¤– Initializing AI integration service...
âœ… OpenAI client initialized successfully
âœ… NLP tools initialized successfully
ğŸ¤– AI Integration Service initialized successfully
ğŸ” Initializing detection services...
ğŸ¤– ML models initialized for spam detection
ğŸ§  Emotion classifier initialized
âš¡ Initializing enhancement services...
ğŸ§  Smart tagging service initialized
ğŸ“‹ Loaded 2 blacklisted addresses
ğŸ” Real-time fraud monitoring started
ğŸ¤– Initializing auto-moderation engine...
ğŸ”¨ Initializing automated ban system...
ğŸ” Automated ban system monitoring started
âœ… All moderation services initialized successfully
ğŸš€ Enhanced Moderation Service initialized successfully
âœ… Enhanced Moderation Service initialized for AI routes
[dotenv@17.2.2] injecting env (0) from .env -- tip: ğŸ“¡ version env with Radar: https://dotenvx.com/radar
ğŸ”„ Attempting to connect to database...
IMPORTANT! Eviction policy is allkeys-lru. It should be "noeviction"
IMPORTANT! Eviction policy is allkeys-lru. It should be "noeviction"
âœ… OpenAI service health check passed
âœ… Database connected successfully
âœ… Environment validation passed
ğŸ“ Environment: development
ğŸŒ Server: 0.0.0.0:3002
ğŸ” JWT configured: Yes
ğŸ“Š Database: Configured
âš¡ Redis: localhost:6380
ğŸ”— OAuth providers: None configured
ğŸŒ Web3 providers: Infura, Alchemy, Moralis
ğŸ™ï¸  Voice/Video: Enabled
ğŸ“ LiveKit: ws://localhost:7880
ğŸµ Voice bitrate: 64000 bps
ğŸ“¹ Video bitrate: 1500000 bps
ğŸ”Š Audio processing: EC=true, NS=true, AGC=true
ğŸ“Š Prometheus Metrics Service initialized
   - HTTP request/response metrics
   - Business KPI tracking
   - Socket.IO real-time metrics
   - Database performance metrics
   - Error and crash tracking
   - Authentication metrics
   - File upload metrics
   - Cache performance metrics
   - Search metrics
   - Notification metrics
   - Default Node.js metrics
   ğŸ“ˆ Metrics endpoint: /metrics
âœ… OpenAI service health check passed
ğŸ”§ Creating MinIO client with config: {
  endpoint: 'localhost',
  port: 9000,
  useSSL: false,
  accessKey: '[REDACTED]'
}
ğŸ”§ Creating MinIO client with config: {
  endpoint: 'localhost',
  port: 9000,
  useSSL: false,
  accessKey: '[REDACTED]'
}
ğŸ”§ Creating MinIO client with config: {
  endpoint: 'localhost',
  port: 9000,
  useSSL: false,
  accessKey: '[REDACTED]'
}
ğŸ”§ Creating MinIO client with config: {
  endpoint: 'localhost',
  port: 9000,
  useSSL: false,
  accessKey: '[REDACTED]'
}
ğŸ”§ Creating MinIO client with config: {
  endpoint: 'localhost',
  port: 9000,
  useSSL: false,
  accessKey: '[REDACTED]'
}
ğŸ”§ Creating MinIO client with config: {
  endpoint: 'localhost',
  port: 9000,
  useSSL: false,
  accessKey: '[REDACTED]'
}
ğŸ”§ Creating MinIO client with config: {
  endpoint: 'localhost',
  port: 9000,
  useSSL: false,
  accessKey: '[REDACTED]'
}
ğŸ”§ Creating MinIO client with config: {
  endpoint: 'localhost',
  port: 9000,
  useSSL: false,
  accessKey: '[REDACTED]'
}
ğŸ”§ Creating MinIO client with config: {
  endpoint: 'localhost',
  port: 9000,
  useSSL: false,
  accessKey: '[REDACTED]'
}
ğŸ”§ Creating MinIO client with config: {
  endpoint: 'localhost',
  port: 9000,
  useSSL: false,
  accessKey: '[REDACTED]'
}
ğŸ”§ Creating MinIO client with config: {
  endpoint: 'localhost',
  port: 9000,
  useSSL: false,
  accessKey: '[REDACTED]'
}
ğŸ”— Initialized MinIO connection pool with 10 connections
ğŸ—ï¸ Initializing MinIO buckets...
ğŸ”§ Enhanced MinIO Service constructor completed
IMPORTANT! Eviction policy is allkeys-lru. It should be "noeviction"
IMPORTANT! Eviction policy is allkeys-lru. It should be "noeviction"
IMPORTANT! Eviction policy is allkeys-lru. It should be "noeviction"
IMPORTANT! Eviction policy is allkeys-lru. It should be "noeviction"
IMPORTANT! Eviction policy is allkeys-lru. It should be "noeviction"
IMPORTANT! Eviction policy is allkeys-lru. It should be "noeviction"
ğŸ“¦ Bucket cryb-avatars already exists
ğŸ”“ Set public read policy for bucket: cryb-avatars
âœ… Bucket cryb-avatars (avatars) ready
ğŸ“¦ Bucket cryb-attachments already exists
âœ… Bucket cryb-attachments (attachments) ready
ğŸ“¦ Bucket cryb-media already exists
âœ… Bucket cryb-media (media) ready
ğŸ“¦ Bucket cryb-emojis already exists
ğŸ”“ Set public read policy for bucket: cryb-emojis
âœ… Bucket cryb-emojis (emojis) ready
ğŸ“¦ Bucket cryb-banners already exists
âœ… Bucket cryb-banners (banners) ready
ğŸ“¦ Bucket cryb-thumbnails already exists
ğŸ”“ Set public read policy for bucket: cryb-thumbnails
âœ… Bucket cryb-thumbnails (thumbnails) ready
ğŸ“¦ Bucket cryb-temp already exists
âœ… Bucket cryb-temp (temp) ready
âœ… MinIO bucket initialization completed
âœ… Enhanced MinIO Service fully initialized
[2025-09-09 19:14:22] [32mINFO[39m: [36mâœ… Enhanced MinIO Service initialized successfully[39m
[2025-09-09 19:14:22] [31mERROR[39m: [36mâŒ Failed to initialize media services:[39m
[2025-09-09 19:14:22] [32mINFO[39m: [36mâš ï¸ Elasticsearch service is disabled due to import issues[39m
[2025-09-09 19:14:22] [32mINFO[39m: [36mğŸ”„ Initializing CRASH-SAFE Socket System...[39m
[2025-09-09 19:14:22] [32mINFO[39m: [36mğŸ”„ Initializing crash-safe Redis Pub/Sub system...[39m
[2025-09-09 19:14:22] [32mINFO[39m: [36mğŸ“¤ Redis Publisher connecting...[39m
[2025-09-09 19:14:22] [32mINFO[39m: [36mğŸ“¥ Redis Subscriber connecting...[39m
[2025-09-09 19:14:22] [32mINFO[39m: [36mğŸ“¥ Redis Subscriber ready[39m
[2025-09-09 19:14:22] [32mINFO[39m: [36mğŸ“¤ Redis Publisher ready[39m
[2025-09-09 19:14:22] [32mINFO[39m: [36mğŸ“¡ Subscribed to 9 channels[39m
[2025-09-09 19:14:22] [32mINFO[39m: [36mâœ… Redis circuit breaker CLOSED - service recovered[39m
[2025-09-09 19:14:22] [32mINFO[39m: [36mğŸ“¡ Redis Pub/Sub connected successfully (server-64336f15-edc1-4f42-908e-0ebea3b620d8)[39m
[2025-09-09 19:14:22] [32mINFO[39m: [36mâœ… Crash-safe Redis Pub/Sub system initialized[39m
[2025-09-09 19:14:24] [32mINFO[39m: [36mâœ… Redis Pub/Sub service initialized[39m
[2025-09-09 19:14:24] [32mINFO[39m: [36mğŸ“¡ Redis main client connected[39m
[2025-09-09 19:14:24] [32mINFO[39m: [36mğŸ“¡ Redis pub client connected[39m
[2025-09-09 19:14:24] [32mINFO[39m: [36mğŸ“¡ Redis sub client connected[39m
[2025-09-09 19:14:24] [32mINFO[39m: [36mâœ… Redis pub client ready[39m
[2025-09-09 19:14:24] [32mINFO[39m: [36mâœ… Redis pub client connected successfully[39m
âœ… Auth service dependencies healthy
[2025-09-09 19:14:24] [32mINFO[39m: [36mâœ… Redis sub client ready[39m
[2025-09-09 19:14:24] [32mINFO[39m: [36mâœ… Redis sub client connected successfully[39m
[2025-09-09 19:14:24] [32mINFO[39m: [36mâœ… Redis main client ready[39m
[2025-09-09 19:14:24] [32mINFO[39m: [36mâœ… Redis main client connected successfully[39m
[2025-09-09 19:14:24] [31mERROR[39m: [36mâŒ Redis adapter setup failed, continuing without clustering:[39m
[2025-09-09 19:14:24] [32mINFO[39m: [36mğŸš€ Socket.io server configured with crash protection[39m
[2025-09-09 19:14:24] [32mINFO[39m: [36mğŸ”Œ Circuit breakers initialized for critical services[39m
[2025-09-09 19:14:24] [32mINFO[39m: [36mğŸ”’ Event handlers setup with comprehensive crash protection[39m
[2025-09-09 19:14:24] [32mINFO[39m: [36mğŸ§¹ Memory leak prevention system started[39m
[2025-09-09 19:14:24] [32mINFO[39m: [36mğŸ“Š Health monitoring started[39m
[2025-09-09 19:14:24] [32mINFO[39m: [36mğŸ”’ Crash-Safe Socket.io System initialized with zero-crash guarantees[39m
âœ… OAuth2 clients initialized for: 
âœ… OAuth service initialized with providers: google, discord, github
âœ… OAuth2 clients initialized for: 
âœ… Enhanced upload services initialized successfully
âŒ Failed to initialize Enhanced Media Transcoding Service: Error: FFmpeg not found in PATH
    at ChildProcess.<anonymous> (/home/ubuntu/cryb-platform/apps/api/src/services/enhanced-video-transcoding.ts:231:16)
    at ChildProcess.emit (node:events:518:28)
    at ChildProcess._handle.onexit (node:internal/child_process:291:12)
    at onErrorNT (node:internal/child_process:483:16)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Video transcoding features will be disabled. Install FFmpeg to enable these features.
âœ… Background workers initialized
âŒ Failed to start server: Error: listen EADDRINUSE: address already in use 0.0.0.0:3002
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -98,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3002
}
[2025-09-09 19:14:25] [32mINFO[39m: [36mâœ… Socket service initialized[39m
[2025-09-09 19:14:25] [32mINFO[39m: [36mâœ… Event handlers initialized in socket service[39m
[2025-09-09 19:14:25] [32mINFO[39m: [36mâœ… Event handlers initialized[39m
[2025-09-09 19:14:25] [32mINFO[39m: [36mğŸ“¨ Cleanup intervals setup[39m
[2025-09-09 19:14:25] [32mINFO[39m: [36mğŸ“¨ Redis subscriptions setup[39m
[2025-09-09 19:14:25] [32mINFO[39m: [36mğŸ“¨ Realtime Messaging System initialized[39m
[2025-09-09 19:14:25] [32mINFO[39m: [36mâœ… Messaging system reference set in socket service[39m
[2025-09-09 19:14:25] [32mINFO[39m: [36mâœ… Comprehensive messaging system initialized[39m
[2025-09-09 19:14:25] [32mINFO[39m: [36mğŸ“¨ Real-time messaging features active:[39m
[2025-09-09 19:14:25] [32mINFO[39m: [36m   - Message send/receive with acknowledgments[39m
[2025-09-09 19:14:25] [32mINFO[39m: [36m   - Typing indicators with auto-cleanup[39m
[2025-09-09 19:14:25] [32mINFO[39m: [36m   - Read receipts for messages[39m
[2025-09-09 19:14:25] [32mINFO[39m: [36m   - Room/channel management[39m
[2025-09-09 19:14:25] [32mINFO[39m: [36m   - Presence tracking (online/offline)[39m
[2025-09-09 19:14:25] [32mINFO[39m: [36m   - Message history synchronization[39m
[2025-09-09 19:14:25] [32mINFO[39m: [36m   - Real-time notifications[39m
[2025-09-09 19:14:25] [32mINFO[39m: [36m   - Rate limiting and spam prevention[39m
[2025-09-09 19:14:25] [32mINFO[39m: [36mâœ… Discord-style realtime handler initialized[39m
[2025-09-09 19:14:25] [32mINFO[39m: [36mğŸ”Œ Discord Gateway-compatible events active[39m
[2025-09-09 19:14:25] [32mINFO[39m: [36mğŸ“Š System health monitoring started[39m
[2025-09-09 19:14:25] [32mINFO[39m: [36mğŸ”’ Graceful shutdown handlers registered[39m
[2025-09-09 19:14:25] [32mINFO[39m: [36mğŸ”’ CRASH-SAFE Socket System initialized successfully[39m
[2025-09-09 19:14:25] [32mINFO[39m: [36mğŸ›¡ï¸  Zero-crash guarantees active:[39m
[2025-09-09 19:14:25] [32mINFO[39m: [36m   âœ… Comprehensive error handling[39m
[2025-09-09 19:14:25] [32mINFO[39m: [36m   âœ… Connection retry with exponential backoff[39m
[2025-09-09 19:14:25] [32mINFO[39m: [36m   âœ… Circuit breakers for all services[39m
[2025-09-09 19:14:25] [32mINFO[39m: [36m   âœ… Rate limiting on all events[39m
[2025-09-09 19:14:25] [32mINFO[39m: [36m   âœ… Memory leak prevention[39m
[2025-09-09 19:14:25] [32mINFO[39m: [36m   âœ… Automatic cleanup and recovery[39m
[2025-09-09 19:14:25] [32mINFO[39m: [36m   âœ… Discord-style realtime events[39m
[2025-09-09 19:14:25] [32mINFO[39m: [36mğŸ”’ Socket health endpoints registered[39m
[2025-09-09 19:14:29] [31mERROR[39m: [36mFailed to initialize search indexes:[39m
7:24:37 PM [tsx] change in ./src/socket/crash-safe-socket.ts Rerunning...
c7:24:57 PM [tsx] change in ./src/socket/crash-safe-socket.ts Restarting...
7:25:02 PM [tsx] Process didn't exit in 5s. Force killing...
câš ï¸  Using development JWT secret. Change in production!
Transak API key not configured. Payment functionality will be limited.
ğŸ¤– Initializing AI integration service...
âœ… OpenAI client initialized successfully
âœ… NLP tools initialized successfully
ğŸ¤– AI Integration Service initialized successfully
ğŸ” Initializing detection services...
ğŸ¤– ML models initialized for spam detection
ğŸ§  Emotion classifier initialized
âš¡ Initializing enhancement services...
ğŸ§  Smart tagging service initialized
ğŸ“‹ Loaded 2 blacklisted addresses
ğŸ” Real-time fraud monitoring started
ğŸ¤– Initializing auto-moderation engine...
ğŸ”¨ Initializing automated ban system...
ğŸ” Automated ban system monitoring started
âœ… All moderation services initialized successfully
ğŸš€ Enhanced Moderation Service initialized successfully
âœ… Enhanced Moderation Service initialized for moderation routes
ğŸ¤– Initializing AI integration service...
âœ… OpenAI client initialized successfully
âœ… NLP tools initialized successfully
ğŸ¤– AI Integration Service initialized successfully
ğŸ” Initializing detection services...
ğŸ¤– ML models initialized for spam detection
ğŸ§  Emotion classifier initialized
âš¡ Initializing enhancement services...
ğŸ§  Smart tagging service initialized
ğŸ“‹ Loaded 2 blacklisted addresses
ğŸ” Real-time fraud monitoring started
ğŸ¤– Initializing auto-moderation engine...
ğŸ”¨ Initializing automated ban system...
ğŸ” Automated ban system monitoring started
âœ… All moderation services initialized successfully
ğŸš€ Enhanced Moderation Service initialized successfully
âœ… Enhanced Moderation Service initialized for AI routes
[dotenv@17.2.2] injecting env (0) from .env -- tip: ğŸ› ï¸  run anywhere with `dotenvx run -- yourcommand`
ğŸ”„ Attempting to connect to database...
IMPORTANT! Eviction policy is allkeys-lru. It should be "noeviction"
IMPORTANT! Eviction policy is allkeys-lru. It should be "noeviction"
âœ… OpenAI service health check passed
âœ… OpenAI service health check passed
âœ… Database connected successfully
âœ… Environment validation passed
ğŸ“ Environment: development
ğŸŒ Server: 0.0.0.0:3002
ğŸ” JWT configured: Yes
ğŸ“Š Database: Configured
âš¡ Redis: localhost:6380
ğŸ”— OAuth providers: None configured
ğŸŒ Web3 providers: Infura, Alchemy, Moralis
ğŸ™ï¸  Voice/Video: Enabled
ğŸ“ LiveKit: ws://localhost:7880
ğŸµ Voice bitrate: 64000 bps
ğŸ“¹ Video bitrate: 1500000 bps
ğŸ”Š Audio processing: EC=true, NS=true, AGC=true
ğŸ“Š Prometheus Metrics Service initialized
   - HTTP request/response metrics
   - Business KPI tracking
   - Socket.IO real-time metrics
   - Database performance metrics
   - Error and crash tracking
   - Authentication metrics
   - File upload metrics
   - Cache performance metrics
   - Search metrics
   - Notification metrics
   - Default Node.js metrics
   ğŸ“ˆ Metrics endpoint: /metrics
ğŸ”§ Creating MinIO client with config: {
  endpoint: 'localhost',
  port: 9000,
  useSSL: false,
  accessKey: '[REDACTED]'
}
ğŸ”§ Creating MinIO client with config: {
  endpoint: 'localhost',
  port: 9000,
  useSSL: false,
  accessKey: '[REDACTED]'
}
ğŸ”§ Creating MinIO client with config: {
  endpoint: 'localhost',
  port: 9000,
  useSSL: false,
  accessKey: '[REDACTED]'
}
ğŸ”§ Creating MinIO client with config: {
  endpoint: 'localhost',
  port: 9000,
  useSSL: false,
  accessKey: '[REDACTED]'
}
ğŸ”§ Creating MinIO client with config: {
  endpoint: 'localhost',
  port: 9000,
  useSSL: false,
  accessKey: '[REDACTED]'
}
ğŸ”§ Creating MinIO client with config: {
  endpoint: 'localhost',
  port: 9000,
  useSSL: false,
  accessKey: '[REDACTED]'
}
ğŸ”§ Creating MinIO client with config: {
  endpoint: 'localhost',
  port: 9000,
  useSSL: false,
  accessKey: '[REDACTED]'
}
ğŸ”§ Creating MinIO client with config: {
  endpoint: 'localhost',
  port: 9000,
  useSSL: false,
  accessKey: '[REDACTED]'
}
ğŸ”§ Creating MinIO client with config: {
  endpoint: 'localhost',
  port: 9000,
  useSSL: false,
  accessKey: '[REDACTED]'
}
ğŸ”§ Creating MinIO client with config: {
  endpoint: 'localhost',
  port: 9000,
  useSSL: false,
  accessKey: '[REDACTED]'
}
ğŸ”§ Creating MinIO client with config: {
  endpoint: 'localhost',
  port: 9000,
  useSSL: false,
  accessKey: '[REDACTED]'
}
ğŸ”— Initialized MinIO connection pool with 10 connections
ğŸ—ï¸ Initializing MinIO buckets...
ğŸ”§ Enhanced MinIO Service constructor completed
IMPORTANT! Eviction policy is allkeys-lru. It should be "noeviction"
ğŸ“¦ Bucket cryb-avatars already exists
IMPORTANT! Eviction policy is allkeys-lru. It should be "noeviction"
IMPORTANT! Eviction policy is allkeys-lru. It should be "noeviction"
IMPORTANT! Eviction policy is allkeys-lru. It should be "noeviction"
IMPORTANT! Eviction policy is allkeys-lru. It should be "noeviction"
IMPORTANT! Eviction policy is allkeys-lru. It should be "noeviction"
ğŸ”“ Set public read policy for bucket: cryb-avatars
âœ… Bucket cryb-avatars (avatars) ready
ğŸ“¦ Bucket cryb-attachments already exists
âœ… Bucket cryb-attachments (attachments) ready
ğŸ“¦ Bucket cryb-media already exists
âœ… Bucket cryb-media (media) ready
ğŸ“¦ Bucket cryb-emojis already exists
ğŸ”“ Set public read policy for bucket: cryb-emojis
âœ… Bucket cryb-emojis (emojis) ready
ğŸ“¦ Bucket cryb-banners already exists
âœ… Bucket cryb-banners (banners) ready
ğŸ“¦ Bucket cryb-thumbnails already exists
ğŸ”“ Set public read policy for bucket: cryb-thumbnails
âœ… Bucket cryb-thumbnails (thumbnails) ready
ğŸ“¦ Bucket cryb-temp already exists
âœ… Bucket cryb-temp (temp) ready
âœ… MinIO bucket initialization completed
âœ… Enhanced MinIO Service fully initialized
[2025-09-09 19:27:25] [32mINFO[39m: [36mâœ… Enhanced MinIO Service initialized successfully[39m
[2025-09-09 19:27:25] [31mERROR[39m: [36mâŒ Failed to initialize media services:[39m
[2025-09-09 19:27:25] [32mINFO[39m: [36mâš ï¸ Elasticsearch service is disabled due to import issues[39m
[2025-09-09 19:27:25] [32mINFO[39m: [36mğŸ”„ Initializing CRASH-SAFE Socket System...[39m
[2025-09-09 19:27:25] [32mINFO[39m: [36mğŸ”„ Initializing crash-safe Redis Pub/Sub system...[39m
[2025-09-09 19:27:25] [32mINFO[39m: [36mğŸ“¤ Redis Publisher connecting...[39m
[2025-09-09 19:27:25] [32mINFO[39m: [36mğŸ“¥ Redis Subscriber connecting...[39m
[2025-09-09 19:27:25] [32mINFO[39m: [36mğŸ“¥ Redis Subscriber ready[39m
[2025-09-09 19:27:25] [32mINFO[39m: [36mğŸ“¤ Redis Publisher ready[39m
[2025-09-09 19:27:25] [32mINFO[39m: [36mğŸ“¡ Subscribed to 9 channels[39m
[2025-09-09 19:27:25] [32mINFO[39m: [36mâœ… Redis circuit breaker CLOSED - service recovered[39m
[2025-09-09 19:27:25] [32mINFO[39m: [36mğŸ“¡ Redis Pub/Sub connected successfully (server-855c7d48-3094-4b58-9153-9c4c6c289864)[39m
[2025-09-09 19:27:25] [32mINFO[39m: [36mâœ… Crash-safe Redis Pub/Sub system initialized[39m
âœ… Auth service dependencies healthy
[2025-09-09 19:27:27] [32mINFO[39m: [36mâœ… Redis Pub/Sub service initialized[39m
[2025-09-09 19:27:27] [32mINFO[39m: [36mğŸ“¡ Redis main client connected[39m
[2025-09-09 19:27:27] [32mINFO[39m: [36mğŸ“¡ Redis pub client connected[39m
[2025-09-09 19:27:27] [32mINFO[39m: [36mğŸ“¡ Redis sub client connected[39m
[2025-09-09 19:27:27] [32mINFO[39m: [36mâœ… Redis main client ready[39m
[2025-09-09 19:27:27] [32mINFO[39m: [36mâœ… Redis main client connected successfully[39m
[2025-09-09 19:27:27] [32mINFO[39m: [36mâœ… Redis pub client ready[39m
[2025-09-09 19:27:27] [32mINFO[39m: [36mâœ… Redis pub client connected successfully[39m
[2025-09-09 19:27:27] [32mINFO[39m: [36mâœ… Redis sub client ready[39m
[2025-09-09 19:27:27] [32mINFO[39m: [36mâœ… Redis sub client connected successfully[39m
[2025-09-09 19:27:27] [31mERROR[39m: [36mâŒ Redis adapter setup failed, continuing without clustering:[39m
[2025-09-09 19:27:28] [32mINFO[39m: [36mğŸš€ Socket.io server configured with crash protection[39m
[2025-09-09 19:27:28] [32mINFO[39m: [36mğŸ”Œ Circuit breakers initialized for critical services[39m
[2025-09-09 19:27:28] [32mINFO[39m: [36mğŸ”’ Event handlers setup with comprehensive crash protection[39m
[2025-09-09 19:27:28] [32mINFO[39m: [36mğŸ§¹ Memory leak prevention system started[39m
[2025-09-09 19:27:28] [32mINFO[39m: [36mğŸ“Š Health monitoring started[39m
[2025-09-09 19:27:28] [32mINFO[39m: [36mğŸ”’ Crash-Safe Socket.io System initialized with zero-crash guarantees[39m
âœ… OAuth2 clients initialized for: 
âœ… OAuth service initialized with providers: google, discord, github
âœ… OAuth2 clients initialized for: 
âœ… Enhanced upload services initialized successfully
âŒ Failed to initialize Enhanced Media Transcoding Service: Error: FFmpeg not found in PATH
    at ChildProcess.<anonymous> (/home/ubuntu/cryb-platform/apps/api/src/services/enhanced-video-transcoding.ts:231:16)
    at ChildProcess.emit (node:events:518:28)
    at ChildProcess._handle.onexit (node:internal/child_process:291:12)
    at onErrorNT (node:internal/child_process:483:16)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Video transcoding features will be disabled. Install FFmpeg to enable these features.
âœ… Background workers initialized
âŒ Failed to start server: Error: listen EADDRINUSE: address already in use 0.0.0.0:3002
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -98,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3002
}
[2025-09-09 19:27:28] [32mINFO[39m: [36mâœ… Socket service initialized[39m
[2025-09-09 19:27:28] [32mINFO[39m: [36mâœ… Event handlers initialized in socket service[39m
[2025-09-09 19:27:28] [32mINFO[39m: [36mâœ… Event handlers initialized[39m
[2025-09-09 19:27:28] [32mINFO[39m: [36mğŸ“¨ Cleanup intervals setup[39m
[2025-09-09 19:27:28] [32mINFO[39m: [36mğŸ“¨ Redis subscriptions setup[39m
[2025-09-09 19:27:28] [32mINFO[39m: [36mğŸ“¨ Realtime Messaging System initialized[39m
[2025-09-09 19:27:28] [32mINFO[39m: [36mâœ… Messaging system reference set in socket service[39m
[2025-09-09 19:27:28] [32mINFO[39m: [36mâœ… Comprehensive messaging system initialized[39m
[2025-09-09 19:27:28] [32mINFO[39m: [36mğŸ“¨ Real-time messaging features active:[39m
[2025-09-09 19:27:28] [32mINFO[39m: [36m   - Message send/receive with acknowledgments[39m
[2025-09-09 19:27:28] [32mINFO[39m: [36m   - Typing indicators with auto-cleanup[39m
[2025-09-09 19:27:28] [32mINFO[39m: [36m   - Read receipts for messages[39m
[2025-09-09 19:27:28] [32mINFO[39m: [36m   - Room/channel management[39m
[2025-09-09 19:27:28] [32mINFO[39m: [36m   - Presence tracking (online/offline)[39m
[2025-09-09 19:27:28] [32mINFO[39m: [36m   - Message history synchronization[39m
[2025-09-09 19:27:28] [32mINFO[39m: [36m   - Real-time notifications[39m
[2025-09-09 19:27:28] [32mINFO[39m: [36m   - Rate limiting and spam prevention[39m
[2025-09-09 19:27:28] [32mINFO[39m: [36mâœ… Discord-style realtime handler initialized[39m
[2025-09-09 19:27:28] [32mINFO[39m: [36mğŸ”Œ Discord Gateway-compatible events active[39m
[2025-09-09 19:27:28] [32mINFO[39m: [36mğŸ“Š System health monitoring started[39m
[2025-09-09 19:27:28] [32mINFO[39m: [36mğŸ”’ Graceful shutdown handlers registered[39m
[2025-09-09 19:27:28] [32mINFO[39m: [36mğŸ”’ CRASH-SAFE Socket System initialized successfully[39m
[2025-09-09 19:27:28] [32mINFO[39m: [36mğŸ›¡ï¸  Zero-crash guarantees active:[39m
[2025-09-09 19:27:28] [32mINFO[39m: [36m   âœ… Comprehensive error handling[39m
[2025-09-09 19:27:28] [32mINFO[39m: [36m   âœ… Connection retry with exponential backoff[39m
[2025-09-09 19:27:28] [32mINFO[39m: [36m   âœ… Circuit breakers for all services[39m
[2025-09-09 19:27:28] [32mINFO[39m: [36m   âœ… Rate limiting on all events[39m
[2025-09-09 19:27:28] [32mINFO[39m: [36m   âœ… Memory leak prevention[39m
[2025-09-09 19:27:28] [32mINFO[39m: [36m   âœ… Automatic cleanup and recovery[39m
[2025-09-09 19:27:28] [32mINFO[39m: [36m   âœ… Discord-style realtime events[39m
[2025-09-09 19:27:28] [32mINFO[39m: [36mğŸ”’ Socket health endpoints registered[39m
[2025-09-09 19:27:39] [31mERROR[39m: [36mFailed to initialize search indexes:[39m
7:33:13 PM [tsx] change in ./src/socket/crash-safe-socket.ts Rerunning...
câš ï¸  Using development JWT secret. Change in production!
Transak API key not configured. Payment functionality will be limited.
ğŸ¤– Initializing AI integration service...
âœ… OpenAI client initialized successfully
âœ… NLP tools initialized successfully
ğŸ¤– AI Integration Service initialized successfully
ğŸ” Initializing detection services...
ğŸ¤– ML models initialized for spam detection
ğŸ§  Emotion classifier initialized
âš¡ Initializing enhancement services...
ğŸ§  Smart tagging service initialized
ğŸ“‹ Loaded 2 blacklisted addresses
ğŸ” Real-time fraud monitoring started
ğŸ¤– Initializing auto-moderation engine...
ğŸ”¨ Initializing automated ban system...
ğŸ” Automated ban system monitoring started
âœ… All moderation services initialized successfully
ğŸš€ Enhanced Moderation Service initialized successfully
âœ… Enhanced Moderation Service initialized for moderation routes
ğŸ¤– Initializing AI integration service...
âœ… OpenAI client initialized successfully
âœ… NLP tools initialized successfully
ğŸ¤– AI Integration Service initialized successfully
ğŸ” Initializing detection services...
ğŸ¤– ML models initialized for spam detection
ğŸ§  Emotion classifier initialized
âš¡ Initializing enhancement services...
ğŸ§  Smart tagging service initialized
ğŸ“‹ Loaded 2 blacklisted addresses
ğŸ” Real-time fraud monitoring started
ğŸ¤– Initializing auto-moderation engine...
ğŸ”¨ Initializing automated ban system...
ğŸ” Automated ban system monitoring started
âœ… All moderation services initialized successfully
ğŸš€ Enhanced Moderation Service initialized successfully
âœ… Enhanced Moderation Service initialized for AI routes
[dotenv@17.2.2] injecting env (0) from .env -- tip: ğŸ› ï¸  run anywhere with `dotenvx run -- yourcommand`
ğŸ”„ Attempting to connect to database...
IMPORTANT! Eviction policy is allkeys-lru. It should be "noeviction"
IMPORTANT! Eviction policy is allkeys-lru. It should be "noeviction"
âœ… OpenAI service health check passed
âœ… OpenAI service health check passed
âœ… Database connected successfully
âœ… Environment validation passed
ğŸ“ Environment: development
ğŸŒ Server: 0.0.0.0:3002
ğŸ” JWT configured: Yes
ğŸ“Š Database: Configured
âš¡ Redis: localhost:6380
ğŸ”— OAuth providers: None configured
ğŸŒ Web3 providers: Infura, Alchemy, Moralis
ğŸ™ï¸  Voice/Video: Enabled
ğŸ“ LiveKit: ws://localhost:7880
ğŸµ Voice bitrate: 64000 bps
ğŸ“¹ Video bitrate: 1500000 bps
ğŸ”Š Audio processing: EC=true, NS=true, AGC=true
ğŸ“Š Prometheus Metrics Service initialized
   - HTTP request/response metrics
   - Business KPI tracking
   - Socket.IO real-time metrics
   - Database performance metrics
   - Error and crash tracking
   - Authentication metrics
   - File upload metrics
   - Cache performance metrics
   - Search metrics
   - Notification metrics
   - Default Node.js metrics
   ğŸ“ˆ Metrics endpoint: /metrics
ğŸ”§ Creating MinIO client with config: {
  endpoint: 'localhost',
  port: 9000,
  useSSL: false,
  accessKey: '[REDACTED]'
}
ğŸ”§ Creating MinIO client with config: {
  endpoint: 'localhost',
  port: 9000,
  useSSL: false,
  accessKey: '[REDACTED]'
}
ğŸ”§ Creating MinIO client with config: {
  endpoint: 'localhost',
  port: 9000,
  useSSL: false,
  accessKey: '[REDACTED]'
}
ğŸ”§ Creating MinIO client with config: {
  endpoint: 'localhost',
  port: 9000,
  useSSL: false,
  accessKey: '[REDACTED]'
}
ğŸ”§ Creating MinIO client with config: {
  endpoint: 'localhost',
  port: 9000,
  useSSL: false,
  accessKey: '[REDACTED]'
}
ğŸ”§ Creating MinIO client with config: {
  endpoint: 'localhost',
  port: 9000,
  useSSL: false,
  accessKey: '[REDACTED]'
}
ğŸ”§ Creating MinIO client with config: {
  endpoint: 'localhost',
  port: 9000,
  useSSL: false,
  accessKey: '[REDACTED]'
}
ğŸ”§ Creating MinIO client with config: {
  endpoint: 'localhost',
  port: 9000,
  useSSL: false,
  accessKey: '[REDACTED]'
}
ğŸ”§ Creating MinIO client with config: {
  endpoint: 'localhost',
  port: 9000,
  useSSL: false,
  accessKey: '[REDACTED]'
}
ğŸ”§ Creating MinIO client with config: {
  endpoint: 'localhost',
  port: 9000,
  useSSL: false,
  accessKey: '[REDACTED]'
}
ğŸ”§ Creating MinIO client with config: {
  endpoint: 'localhost',
  port: 9000,
  useSSL: false,
  accessKey: '[REDACTED]'
}
ğŸ”— Initialized MinIO connection pool with 10 connections
ğŸ—ï¸ Initializing MinIO buckets...
ğŸ”§ Enhanced MinIO Service constructor completed
ğŸ“¦ Bucket cryb-avatars already exists
IMPORTANT! Eviction policy is allkeys-lru. It should be "noeviction"
IMPORTANT! Eviction policy is allkeys-lru. It should be "noeviction"
IMPORTANT! Eviction policy is allkeys-lru. It should be "noeviction"
IMPORTANT! Eviction policy is allkeys-lru. It should be "noeviction"
IMPORTANT! Eviction policy is allkeys-lru. It should be "noeviction"
IMPORTANT! Eviction policy is allkeys-lru. It should be "noeviction"
ğŸ”“ Set public read policy for bucket: cryb-avatars
âœ… Bucket cryb-avatars (avatars) ready
ğŸ“¦ Bucket cryb-attachments already exists
âœ… Bucket cryb-attachments (attachments) ready
ğŸ“¦ Bucket cryb-media already exists
âœ… Bucket cryb-media (media) ready
ğŸ“¦ Bucket cryb-emojis already exists
ğŸ”“ Set public read policy for bucket: cryb-emojis
âœ… Bucket cryb-emojis (emojis) ready
ğŸ“¦ Bucket cryb-banners already exists
âœ… Bucket cryb-banners (banners) ready
ğŸ“¦ Bucket cryb-thumbnails already exists
ğŸ”“ Set public read policy for bucket: cryb-thumbnails
âœ… Bucket cryb-thumbnails (thumbnails) ready
ğŸ“¦ Bucket cryb-temp already exists
âœ… Bucket cryb-temp (temp) ready
âœ… MinIO bucket initialization completed
âœ… Enhanced MinIO Service fully initialized
[2025-09-09 19:35:46] [32mINFO[39m: [36mâœ… Enhanced MinIO Service initialized successfully[39m
[2025-09-09 19:35:46] [31mERROR[39m: [36mâŒ Failed to initialize media services:[39m
[2025-09-09 19:35:46] [32mINFO[39m: [36mâš ï¸ Elasticsearch service is disabled due to import issues[39m
[2025-09-09 19:35:46] [32mINFO[39m: [36mğŸ”„ Initializing CRASH-SAFE Socket System...[39m
[2025-09-09 19:35:46] [32mINFO[39m: [36mğŸ”„ Initializing crash-safe Redis Pub/Sub system...[39m
[2025-09-09 19:35:46] [32mINFO[39m: [36mğŸ“¤ Redis Publisher connecting...[39m
[2025-09-09 19:35:46] [32mINFO[39m: [36mğŸ“¥ Redis Subscriber connecting...[39m
[2025-09-09 19:35:46] [32mINFO[39m: [36mğŸ“¥ Redis Subscriber ready[39m
[2025-09-09 19:35:46] [32mINFO[39m: [36mğŸ“¤ Redis Publisher ready[39m
[2025-09-09 19:35:46] [32mINFO[39m: [36mğŸ“¡ Subscribed to 9 channels[39m
[2025-09-09 19:35:46] [32mINFO[39m: [36mâœ… Redis circuit breaker CLOSED - service recovered[39m
[2025-09-09 19:35:46] [32mINFO[39m: [36mğŸ“¡ Redis Pub/Sub connected successfully (server-fc9a18fa-f0e3-4f16-9ab4-187c05c018d9)[39m
[2025-09-09 19:35:46] [32mINFO[39m: [36mâœ… Crash-safe Redis Pub/Sub system initialized[39m
[2025-09-09 19:35:48] [32mINFO[39m: [36mâœ… Redis Pub/Sub service initialized[39m
[2025-09-09 19:35:48] [32mINFO[39m: [36mğŸ“¡ Redis main client connected[39m
[2025-09-09 19:35:48] [32mINFO[39m: [36mğŸ“¡ Redis pub client connected[39m
[2025-09-09 19:35:48] [32mINFO[39m: [36mğŸ“¡ Redis sub client connected[39m
[2025-09-09 19:35:49] [32mINFO[39m: [36mâœ… Redis pub client ready[39m
[2025-09-09 19:35:49] [32mINFO[39m: [36mâœ… Redis pub client connected successfully[39m
[2025-09-09 19:35:49] [32mINFO[39m: [36mâœ… Redis main client ready[39m
[2025-09-09 19:35:49] [32mINFO[39m: [36mâœ… Redis main client connected successfully[39m
[2025-09-09 19:35:49] [32mINFO[39m: [36mâœ… Redis sub client ready[39m
[2025-09-09 19:35:49] [32mINFO[39m: [36mâœ… Redis sub client connected successfully[39m
[2025-09-09 19:35:49] [31mERROR[39m: [36mâŒ Redis adapter setup failed, continuing without clustering:[39m
[2025-09-09 19:35:49] [32mINFO[39m: [36mğŸš€ Socket.io server configured with crash protection[39m
[2025-09-09 19:35:49] [32mINFO[39m: [36mğŸ”Œ Circuit breakers initialized for critical services[39m
[2025-09-09 19:35:49] [32mINFO[39m: [36mğŸ”’ Event handlers setup with comprehensive crash protection[39m
[2025-09-09 19:35:49] [32mINFO[39m: [36mğŸ§¹ Memory leak prevention system started[39m
[2025-09-09 19:35:49] [32mINFO[39m: [36mğŸ“Š Health monitoring started[39m
[2025-09-09 19:35:49] [32mINFO[39m: [36mğŸ”’ Crash-Safe Socket.io System initialized with zero-crash guarantees[39m
âœ… OAuth2 clients initialized for: 
âœ… OAuth service initialized with providers: google, discord, github
âœ… OAuth2 clients initialized for: 
âœ… Enhanced upload services initialized successfully
âŒ Failed to initialize Enhanced Media Transcoding Service: Error: FFmpeg not found in PATH
    at ChildProcess.<anonymous> (/home/ubuntu/cryb-platform/apps/api/src/services/enhanced-video-transcoding.ts:231:16)
    at ChildProcess.emit (node:events:518:28)
    at ChildProcess._handle.onexit (node:internal/child_process:291:12)
    at onErrorNT (node:internal/child_process:483:16)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Video transcoding features will be disabled. Install FFmpeg to enable these features.
âœ… Background workers initialized
âŒ Failed to start server: Error: listen EADDRINUSE: address already in use 0.0.0.0:3002
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -98,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3002
}
[2025-09-09 19:35:49] [32mINFO[39m: [36mâœ… Socket service initialized[39m
[2025-09-09 19:35:49] [32mINFO[39m: [36mâœ… Event handlers initialized in socket service[39m
[2025-09-09 19:35:49] [32mINFO[39m: [36mâœ… Event handlers initialized[39m
[2025-09-09 19:35:49] [32mINFO[39m: [36mğŸ“¨ Cleanup intervals setup[39m
[2025-09-09 19:35:49] [32mINFO[39m: [36mğŸ“¨ Redis subscriptions setup[39m
[2025-09-09 19:35:49] [32mINFO[39m: [36mğŸ“¨ Realtime Messaging System initialized[39m
[2025-09-09 19:35:49] [32mINFO[39m: [36mâœ… Messaging system reference set in socket service[39m
[2025-09-09 19:35:49] [32mINFO[39m: [36mâœ… Comprehensive messaging system initialized[39m
[2025-09-09 19:35:49] [32mINFO[39m: [36mğŸ“¨ Real-time messaging features active:[39m
[2025-09-09 19:35:49] [32mINFO[39m: [36m   - Message send/receive with acknowledgments[39m
[2025-09-09 19:35:49] [32mINFO[39m: [36m   - Typing indicators with auto-cleanup[39m
[2025-09-09 19:35:49] [32mINFO[39m: [36m   - Read receipts for messages[39m
[2025-09-09 19:35:49] [32mINFO[39m: [36m   - Room/channel management[39m
[2025-09-09 19:35:49] [32mINFO[39m: [36m   - Presence tracking (online/offline)[39m
[2025-09-09 19:35:49] [32mINFO[39m: [36m   - Message history synchronization[39m
[2025-09-09 19:35:49] [32mINFO[39m: [36m   - Real-time notifications[39m
[2025-09-09 19:35:49] [32mINFO[39m: [36m   - Rate limiting and spam prevention[39m
[2025-09-09 19:35:49] [32mINFO[39m: [36mâœ… Discord-style realtime handler initialized[39m
[2025-09-09 19:35:49] [32mINFO[39m: [36mğŸ”Œ Discord Gateway-compatible events active[39m
[2025-09-09 19:35:49] [32mINFO[39m: [36mğŸ“Š System health monitoring started[39m
[2025-09-09 19:35:49] [32mINFO[39m: [36mğŸ”’ Graceful shutdown handlers registered[39m
[2025-09-09 19:35:49] [32mINFO[39m: [36mğŸ”’ CRASH-SAFE Socket System initialized successfully[39m
[2025-09-09 19:35:49] [32mINFO[39m: [36mğŸ›¡ï¸  Zero-crash guarantees active:[39m
[2025-09-09 19:35:49] [32mINFO[39m: [36m   âœ… Comprehensive error handling[39m
[2025-09-09 19:35:49] [32mINFO[39m: [36m   âœ… Connection retry with exponential backoff[39m
[2025-09-09 19:35:49] [32mINFO[39m: [36m   âœ… Circuit breakers for all services[39m
[2025-09-09 19:35:49] [32mINFO[39m: [36m   âœ… Rate limiting on all events[39m
[2025-09-09 19:35:49] [32mINFO[39m: [36m   âœ… Memory leak prevention[39m
[2025-09-09 19:35:49] [32mINFO[39m: [36m   âœ… Automatic cleanup and recovery[39m
[2025-09-09 19:35:49] [32mINFO[39m: [36m   âœ… Discord-style realtime events[39m
[2025-09-09 19:35:49] [32mINFO[39m: [36mğŸ”’ Socket health endpoints registered[39m
[2025-09-09 19:36:02] [31mERROR[39m: [36mFailed to initialize search indexes:[39m
7:37:27 PM [tsx] change in ./src/socket/crash-safe-socket.ts Rerunning...
câš ï¸  Using development JWT secret. Change in production!
Transak API key not configured. Payment functionality will be limited.
ğŸ¤– Initializing AI integration service...
âœ… OpenAI client initialized successfully
âœ… NLP tools initialized successfully
ğŸ¤– AI Integration Service initialized successfully
ğŸ” Initializing detection services...
ğŸ¤– ML models initialized for spam detection
ğŸ§  Emotion classifier initialized
âš¡ Initializing enhancement services...
ğŸ§  Smart tagging service initialized
ğŸ“‹ Loaded 2 blacklisted addresses
ğŸ” Real-time fraud monitoring started
ğŸ¤– Initializing auto-moderation engine...
ğŸ”¨ Initializing automated ban system...
ğŸ” Automated ban system monitoring started
âœ… All moderation services initialized successfully
ğŸš€ Enhanced Moderation Service initialized successfully
âœ… Enhanced Moderation Service initialized for moderation routes
ğŸ¤– Initializing AI integration service...
âœ… OpenAI client initialized successfully
âœ… NLP tools initialized successfully
ğŸ¤– AI Integration Service initialized successfully
ğŸ” Initializing detection services...
ğŸ¤– ML models initialized for spam detection
ğŸ§  Emotion classifier initialized
âš¡ Initializing enhancement services...
ğŸ§  Smart tagging service initialized
ğŸ“‹ Loaded 2 blacklisted addresses
ğŸ” Real-time fraud monitoring started
ğŸ¤– Initializing auto-moderation engine...
ğŸ”¨ Initializing automated ban system...
ğŸ” Automated ban system monitoring started
âœ… All moderation services initialized successfully
ğŸš€ Enhanced Moderation Service initialized successfully
âœ… Enhanced Moderation Service initialized for AI routes
[dotenv@17.2.2] injecting env (0) from .env -- tip: âš™ï¸  load multiple .env files with { path: ['.env.local', '.env'] }
ğŸ”„ Attempting to connect to database...
IMPORTANT! Eviction policy is allkeys-lru. It should be "noeviction"
IMPORTANT! Eviction policy is allkeys-lru. It should be "noeviction"
âœ… OpenAI service health check passed
âœ… OpenAI service health check passed
âœ… Database connected successfully
âœ… Environment validation passed
ğŸ“ Environment: development
ğŸŒ Server: 0.0.0.0:3002
ğŸ” JWT configured: Yes
ğŸ“Š Database: Configured
âš¡ Redis: localhost:6380
ğŸ”— OAuth providers: None configured
ğŸŒ Web3 providers: Infura, Alchemy, Moralis
ğŸ™ï¸  Voice/Video: Enabled
ğŸ“ LiveKit: ws://localhost:7880
ğŸµ Voice bitrate: 64000 bps
ğŸ“¹ Video bitrate: 1500000 bps
ğŸ”Š Audio processing: EC=true, NS=true, AGC=true
ğŸ“Š Prometheus Metrics Service initialized
   - HTTP request/response metrics
   - Business KPI tracking
   - Socket.IO real-time metrics
   - Database performance metrics
   - Error and crash tracking
   - Authentication metrics
   - File upload metrics
   - Cache performance metrics
   - Search metrics
   - Notification metrics
   - Default Node.js metrics
   ğŸ“ˆ Metrics endpoint: /metrics
ğŸ”§ Creating MinIO client with config: {
  endpoint: 'localhost',
  port: 9000,
  useSSL: false,
  accessKey: '[REDACTED]'
}
ğŸ”§ Creating MinIO client with config: {
  endpoint: 'localhost',
  port: 9000,
  useSSL: false,
  accessKey: '[REDACTED]'
}
ğŸ”§ Creating MinIO client with config: {
  endpoint: 'localhost',
  port: 9000,
  useSSL: false,
  accessKey: '[REDACTED]'
}
ğŸ”§ Creating MinIO client with config: {
  endpoint: 'localhost',
  port: 9000,
  useSSL: false,
  accessKey: '[REDACTED]'
}
ğŸ”§ Creating MinIO client with config: {
  endpoint: 'localhost',
  port: 9000,
  useSSL: false,
  accessKey: '[REDACTED]'
}
ğŸ”§ Creating MinIO client with config: {
  endpoint: 'localhost',
  port: 9000,
  useSSL: false,
  accessKey: '[REDACTED]'
}
ğŸ”§ Creating MinIO client with config: {
  endpoint: 'localhost',
  port: 9000,
  useSSL: false,
  accessKey: '[REDACTED]'
}
ğŸ”§ Creating MinIO client with config: {
  endpoint: 'localhost',
  port: 9000,
  useSSL: false,
  accessKey: '[REDACTED]'
}
ğŸ”§ Creating MinIO client with config: {
  endpoint: 'localhost',
  port: 9000,
  useSSL: false,
  accessKey: '[REDACTED]'
}
ğŸ”§ Creating MinIO client with config: {
  endpoint: 'localhost',
  port: 9000,
  useSSL: false,
  accessKey: '[REDACTED]'
}
ğŸ”§ Creating MinIO client with config: {
  endpoint: 'localhost',
  port: 9000,
  useSSL: false,
  accessKey: '[REDACTED]'
}
ğŸ”— Initialized MinIO connection pool with 10 connections
ğŸ—ï¸ Initializing MinIO buckets...
ğŸ”§ Enhanced MinIO Service constructor completed
IMPORTANT! Eviction policy is allkeys-lru. It should be "noeviction"
IMPORTANT! Eviction policy is allkeys-lru. It should be "noeviction"
IMPORTANT! Eviction policy is allkeys-lru. It should be "noeviction"
IMPORTANT! Eviction policy is allkeys-lru. It should be "noeviction"
ğŸ“¦ Bucket cryb-avatars already exists
IMPORTANT! Eviction policy is allkeys-lru. It should be "noeviction"
IMPORTANT! Eviction policy is allkeys-lru. It should be "noeviction"
ğŸ”“ Set public read policy for bucket: cryb-avatars
âœ… Bucket cryb-avatars (avatars) ready
ğŸ“¦ Bucket cryb-attachments already exists
âœ… Bucket cryb-attachments (attachments) ready
ğŸ“¦ Bucket cryb-media already exists
âœ… Bucket cryb-media (media) ready
ğŸ“¦ Bucket cryb-emojis already exists
ğŸ”“ Set public read policy for bucket: cryb-emojis
âœ… Bucket cryb-emojis (emojis) ready
ğŸ“¦ Bucket cryb-banners already exists
âœ… Bucket cryb-banners (banners) ready
ğŸ“¦ Bucket cryb-thumbnails already exists
ğŸ”“ Set public read policy for bucket: cryb-thumbnails
âœ… Bucket cryb-thumbnails (thumbnails) ready
ğŸ“¦ Bucket cryb-temp already exists
âœ… Bucket cryb-temp (temp) ready
âœ… MinIO bucket initialization completed
âœ… Enhanced MinIO Service fully initialized
[2025-09-09 19:39:48] [32mINFO[39m: [36mâœ… Enhanced MinIO Service initialized successfully[39m
[2025-09-09 19:39:48] [31mERROR[39m: [36mâŒ Failed to initialize media services:[39m
[2025-09-09 19:39:48] [32mINFO[39m: [36mâš ï¸ Elasticsearch service is disabled due to import issues[39m
[2025-09-09 19:39:48] [32mINFO[39m: [36mğŸ”„ Initializing CRASH-SAFE Socket System...[39m
[2025-09-09 19:39:48] [32mINFO[39m: [36mğŸ”„ Initializing crash-safe Redis Pub/Sub system...[39m
[2025-09-09 19:39:48] [32mINFO[39m: [36mğŸ“¤ Redis Publisher connecting...[39m
[2025-09-09 19:39:48] [32mINFO[39m: [36mğŸ“¥ Redis Subscriber connecting...[39m
[2025-09-09 19:39:48] [32mINFO[39m: [36mğŸ“¥ Redis Subscriber ready[39m
[2025-09-09 19:39:48] [32mINFO[39m: [36mğŸ“¤ Redis Publisher ready[39m
[2025-09-09 19:39:48] [32mINFO[39m: [36mğŸ“¡ Subscribed to 9 channels[39m
[2025-09-09 19:39:48] [32mINFO[39m: [36mâœ… Redis circuit breaker CLOSED - service recovered[39m
[2025-09-09 19:39:48] [32mINFO[39m: [36mğŸ“¡ Redis Pub/Sub connected successfully (server-3dab8fdd-dcab-4a0d-9bb5-81354290b697)[39m
[2025-09-09 19:39:48] [32mINFO[39m: [36mâœ… Crash-safe Redis Pub/Sub system initialized[39m
[2025-09-09 19:39:50] [32mINFO[39m: [36mâœ… Redis Pub/Sub service initialized[39m
[2025-09-09 19:39:50] [32mINFO[39m: [36mğŸ“¡ Redis main client connected[39m
[2025-09-09 19:39:50] [32mINFO[39m: [36mğŸ“¡ Redis pub client connected[39m
[2025-09-09 19:39:50] [32mINFO[39m: [36mğŸ“¡ Redis sub client connected[39m
[2025-09-09 19:39:50] [32mINFO[39m: [36mâœ… Redis pub client ready[39m
[2025-09-09 19:39:50] [32mINFO[39m: [36mâœ… Redis pub client connected successfully[39m
[2025-09-09 19:39:50] [32mINFO[39m: [36mâœ… Redis main client ready[39m
[2025-09-09 19:39:50] [32mINFO[39m: [36mâœ… Redis main client connected successfully[39m
[2025-09-09 19:39:50] [32mINFO[39m: [36mâœ… Redis sub client ready[39m
[2025-09-09 19:39:50] [32mINFO[39m: [36mâœ… Redis sub client connected successfully[39m
[2025-09-09 19:39:50] [31mERROR[39m: [36mâŒ Redis adapter setup failed, continuing without clustering:[39m
[2025-09-09 19:39:50] [32mINFO[39m: [36mğŸš€ Socket.io server configured with crash protection[39m
[2025-09-09 19:39:50] [32mINFO[39m: [36mğŸ”Œ Circuit breakers initialized for critical services[39m
[2025-09-09 19:39:50] [32mINFO[39m: [36mğŸ”’ Event handlers setup with comprehensive crash protection[39m
[2025-09-09 19:39:50] [32mINFO[39m: [36mğŸ§¹ Memory leak prevention system started[39m
[2025-09-09 19:39:50] [32mINFO[39m: [36mğŸ“Š Health monitoring started[39m
[2025-09-09 19:39:50] [32mINFO[39m: [36mğŸ”’ Crash-Safe Socket.io System initialized with zero-crash guarantees[39m
âœ… Auth service dependencies healthy
âœ… OAuth2 clients initialized for: 
âœ… OAuth service initialized with providers: google, discord, github
âœ… OAuth2 clients initialized for: 
âœ… Enhanced upload services initialized successfully
âŒ Failed to initialize Enhanced Media Transcoding Service: Error: FFmpeg not found in PATH
    at ChildProcess.<anonymous> (/home/ubuntu/cryb-platform/apps/api/src/services/enhanced-video-transcoding.ts:231:16)
    at ChildProcess.emit (node:events:518:28)
    at ChildProcess._handle.onexit (node:internal/child_process:291:12)
    at onErrorNT (node:internal/child_process:483:16)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Video transcoding features will be disabled. Install FFmpeg to enable these features.
âœ… Background workers initialized
âŒ Failed to start server: Error: listen EADDRINUSE: address already in use 0.0.0.0:3002
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -98,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3002
}
[2025-09-09 19:39:51] [32mINFO[39m: [36mâœ… Socket service initialized[39m
[2025-09-09 19:39:51] [32mINFO[39m: [36mâœ… Event handlers initialized in socket service[39m
[2025-09-09 19:39:51] [32mINFO[39m: [36mâœ… Event handlers initialized[39m
[2025-09-09 19:39:51] [32mINFO[39m: [36mğŸ“¨ Cleanup intervals setup[39m
[2025-09-09 19:39:51] [32mINFO[39m: [36mğŸ“¨ Redis subscriptions setup[39m
[2025-09-09 19:39:51] [32mINFO[39m: [36mğŸ“¨ Realtime Messaging System initialized[39m
[2025-09-09 19:39:51] [32mINFO[39m: [36mâœ… Messaging system reference set in socket service[39m
[2025-09-09 19:39:51] [32mINFO[39m: [36mâœ… Comprehensive messaging system initialized[39m
[2025-09-09 19:39:51] [32mINFO[39m: [36mğŸ“¨ Real-time messaging features active:[39m
[2025-09-09 19:39:51] [32mINFO[39m: [36m   - Message send/receive with acknowledgments[39m
[2025-09-09 19:39:51] [32mINFO[39m: [36m   - Typing indicators with auto-cleanup[39m
[2025-09-09 19:39:51] [32mINFO[39m: [36m   - Read receipts for messages[39m
[2025-09-09 19:39:51] [32mINFO[39m: [36m   - Room/channel management[39m
[2025-09-09 19:39:51] [32mINFO[39m: [36m   - Presence tracking (online/offline)[39m
[2025-09-09 19:39:51] [32mINFO[39m: [36m   - Message history synchronization[39m
[2025-09-09 19:39:51] [32mINFO[39m: [36m   - Real-time notifications[39m
[2025-09-09 19:39:51] [32mINFO[39m: [36m   - Rate limiting and spam prevention[39m
[2025-09-09 19:39:51] [32mINFO[39m: [36mâœ… Discord-style realtime handler initialized[39m
[2025-09-09 19:39:51] [32mINFO[39m: [36mğŸ”Œ Discord Gateway-compatible events active[39m
[2025-09-09 19:39:51] [32mINFO[39m: [36mğŸ“Š System health monitoring started[39m
[2025-09-09 19:39:51] [32mINFO[39m: [36mğŸ”’ Graceful shutdown handlers registered[39m
[2025-09-09 19:39:51] [32mINFO[39m: [36mğŸ”’ CRASH-SAFE Socket System initialized successfully[39m
[2025-09-09 19:39:51] [32mINFO[39m: [36mğŸ›¡ï¸  Zero-crash guarantees active:[39m
[2025-09-09 19:39:51] [32mINFO[39m: [36m   âœ… Comprehensive error handling[39m
[2025-09-09 19:39:51] [32mINFO[39m: [36m   âœ… Connection retry with exponential backoff[39m
[2025-09-09 19:39:51] [32mINFO[39m: [36m   âœ… Circuit breakers for all services[39m
[2025-09-09 19:39:51] [32mINFO[39m: [36m   âœ… Rate limiting on all events[39m
[2025-09-09 19:39:51] [32mINFO[39m: [36m   âœ… Memory leak prevention[39m
[2025-09-09 19:39:51] [32mINFO[39m: [36m   âœ… Automatic cleanup and recovery[39m
[2025-09-09 19:39:51] [32mINFO[39m: [36m   âœ… Discord-style realtime events[39m
[2025-09-09 19:39:51] [32mINFO[39m: [36mğŸ”’ Socket health endpoints registered[39m
[2025-09-09 19:40:03] [31mERROR[39m: [36mFailed to initialize search indexes:[39m
11:09:04 PM [tsx] change in ./src/socket/crash-safe-socket.ts Rerunning...
câš ï¸  Using development JWT secret. Change in production!
Transak API key not configured. Payment functionality will be limited.
ğŸ¤– Initializing AI integration service...
âœ… OpenAI client initialized successfully
âœ… NLP tools initialized successfully
ğŸ¤– AI Integration Service initialized successfully
ğŸ” Initializing detection services...
ğŸ¤– ML models initialized for spam detection
ğŸ§  Emotion classifier initialized
âš¡ Initializing enhancement services...
ğŸ§  Smart tagging service initialized
ğŸ“‹ Loaded 2 blacklisted addresses
ğŸ” Real-time fraud monitoring started
ğŸ¤– Initializing auto-moderation engine...
ğŸ”¨ Initializing automated ban system...
ğŸ” Automated ban system monitoring started
âœ… All moderation services initialized successfully
ğŸš€ Enhanced Moderation Service initialized successfully
âœ… Enhanced Moderation Service initialized for moderation routes
ğŸ¤– Initializing AI integration service...
âœ… OpenAI client initialized successfully
âœ… NLP tools initialized successfully
ğŸ¤– AI Integration Service initialized successfully
ğŸ” Initializing detection services...
ğŸ¤– ML models initialized for spam detection
ğŸ§  Emotion classifier initialized
âš¡ Initializing enhancement services...
ğŸ§  Smart tagging service initialized
ğŸ“‹ Loaded 2 blacklisted addresses
ğŸ” Real-time fraud monitoring started
ğŸ¤– Initializing auto-moderation engine...
ğŸ”¨ Initializing automated ban system...
ğŸ” Automated ban system monitoring started
âœ… All moderation services initialized successfully
ğŸš€ Enhanced Moderation Service initialized successfully
âœ… Enhanced Moderation Service initialized for AI routes
[dotenv@17.2.2] injecting env (0) from .env -- tip: ğŸ› ï¸  run anywhere with `dotenvx run -- yourcommand`
ğŸ”„ Attempting to connect to database...
IMPORTANT! Eviction policy is allkeys-lru. It should be "noeviction"
IMPORTANT! Eviction policy is allkeys-lru. It should be "noeviction"
âœ… OpenAI service health check passed
âœ… OpenAI service health check passed
âœ… Database connected successfully
âœ… Environment validation passed
ğŸ“ Environment: development
ğŸŒ Server: 0.0.0.0:3002
ğŸ” JWT configured: Yes
ğŸ“Š Database: Configured
âš¡ Redis: localhost:6380
ğŸ”— OAuth providers: None configured
ğŸŒ Web3 providers: Infura, Alchemy, Moralis
ğŸ™ï¸  Voice/Video: Enabled
ğŸ“ LiveKit: ws://localhost:7880
ğŸµ Voice bitrate: 64000 bps
ğŸ“¹ Video bitrate: 1500000 bps
ğŸ”Š Audio processing: EC=true, NS=true, AGC=true
ğŸ“Š Prometheus Metrics Service initialized
   - HTTP request/response metrics
   - Business KPI tracking
   - Socket.IO real-time metrics
   - Database performance metrics
   - Error and crash tracking
   - Authentication metrics
   - File upload metrics
   - Cache performance metrics
   - Search metrics
   - Notification metrics
   - Default Node.js metrics
   ğŸ“ˆ Metrics endpoint: /metrics
ğŸ”§ Creating MinIO client with config: {
  endpoint: 'localhost',
  port: 9000,
  useSSL: false,
  accessKey: '[REDACTED]'
}
ğŸ”§ Creating MinIO client with config: {
  endpoint: 'localhost',
  port: 9000,
  useSSL: false,
  accessKey: '[REDACTED]'
}
ğŸ”§ Creating MinIO client with config: {
  endpoint: 'localhost',
  port: 9000,
  useSSL: false,
  accessKey: '[REDACTED]'
}
ğŸ”§ Creating MinIO client with config: {
  endpoint: 'localhost',
  port: 9000,
  useSSL: false,
  accessKey: '[REDACTED]'
}
ğŸ”§ Creating MinIO client with config: {
  endpoint: 'localhost',
  port: 9000,
  useSSL: false,
  accessKey: '[REDACTED]'
}
ğŸ”§ Creating MinIO client with config: {
  endpoint: 'localhost',
  port: 9000,
  useSSL: false,
  accessKey: '[REDACTED]'
}
ğŸ”§ Creating MinIO client with config: {
  endpoint: 'localhost',
  port: 9000,
  useSSL: false,
  accessKey: '[REDACTED]'
}
ğŸ”§ Creating MinIO client with config: {
  endpoint: 'localhost',
  port: 9000,
  useSSL: false,
  accessKey: '[REDACTED]'
}
ğŸ”§ Creating MinIO client with config: {
  endpoint: 'localhost',
  port: 9000,
  useSSL: false,
  accessKey: '[REDACTED]'
}
ğŸ”§ Creating MinIO client with config: {
  endpoint: 'localhost',
  port: 9000,
  useSSL: false,
  accessKey: '[REDACTED]'
}
ğŸ”§ Creating MinIO client with config: {
  endpoint: 'localhost',
  port: 9000,
  useSSL: false,
  accessKey: '[REDACTED]'
}
ğŸ”— Initialized MinIO connection pool with 10 connections
ğŸ—ï¸ Initializing MinIO buckets...
ğŸ”§ Enhanced MinIO Service constructor completed
ğŸ“¦ Bucket cryb-avatars already exists
IMPORTANT! Eviction policy is allkeys-lru. It should be "noeviction"
IMPORTANT! Eviction policy is allkeys-lru. It should be "noeviction"
IMPORTANT! Eviction policy is allkeys-lru. It should be "noeviction"
IMPORTANT! Eviction policy is allkeys-lru. It should be "noeviction"
IMPORTANT! Eviction policy is allkeys-lru. It should be "noeviction"
IMPORTANT! Eviction policy is allkeys-lru. It should be "noeviction"
ğŸ”“ Set public read policy for bucket: cryb-avatars
âœ… Bucket cryb-avatars (avatars) ready
ğŸ“¦ Bucket cryb-attachments already exists
âœ… Bucket cryb-attachments (attachments) ready
ğŸ“¦ Bucket cryb-media already exists
âœ… Bucket cryb-media (media) ready
ğŸ“¦ Bucket cryb-emojis already exists
ğŸ”“ Set public read policy for bucket: cryb-emojis
âœ… Bucket cryb-emojis (emojis) ready
ğŸ“¦ Bucket cryb-banners already exists
âœ… Bucket cryb-banners (banners) ready
ğŸ“¦ Bucket cryb-thumbnails already exists
ğŸ”“ Set public read policy for bucket: cryb-thumbnails
âœ… Bucket cryb-thumbnails (thumbnails) ready
ğŸ“¦ Bucket cryb-temp already exists
âœ… Bucket cryb-temp (temp) ready
âœ… MinIO bucket initialization completed
âœ… Enhanced MinIO Service fully initialized
[2025-09-09 23:13:55] [32mINFO[39m: [36mâœ… Enhanced MinIO Service initialized successfully[39m
[2025-09-09 23:13:55] [31mERROR[39m: [36mâŒ Failed to initialize media services:[39m
[2025-09-09 23:13:55] [32mINFO[39m: [36mâš ï¸ Elasticsearch service is disabled due to import issues[39m
[2025-09-09 23:13:55] [32mINFO[39m: [36mğŸ”„ Initializing CRASH-SAFE Socket System...[39m
[2025-09-09 23:13:55] [32mINFO[39m: [36mğŸ”„ Initializing crash-safe Redis Pub/Sub system...[39m
[2025-09-09 23:13:55] [32mINFO[39m: [36mğŸ“¥ Redis Subscriber connecting...[39m
[2025-09-09 23:13:55] [32mINFO[39m: [36mğŸ“¤ Redis Publisher connecting...[39m
[2025-09-09 23:13:55] [32mINFO[39m: [36mğŸ“¤ Redis Publisher ready[39m
[2025-09-09 23:13:55] [32mINFO[39m: [36mğŸ“¥ Redis Subscriber ready[39m
[2025-09-09 23:13:55] [32mINFO[39m: [36mğŸ“¡ Subscribed to 9 channels[39m
[2025-09-09 23:13:55] [32mINFO[39m: [36mâœ… Redis circuit breaker CLOSED - service recovered[39m
[2025-09-09 23:13:55] [32mINFO[39m: [36mğŸ“¡ Redis Pub/Sub connected successfully (server-038f68ab-7dd9-4112-9ea3-b174ca374141)[39m
[2025-09-09 23:13:55] [32mINFO[39m: [36mâœ… Crash-safe Redis Pub/Sub system initialized[39m
[2025-09-09 23:13:57] [32mINFO[39m: [36mâœ… Redis Pub/Sub service initialized[39m
[2025-09-09 23:13:57] [32mINFO[39m: [36mğŸ“¡ Redis main client connected[39m
[2025-09-09 23:13:57] [32mINFO[39m: [36mğŸ“¡ Redis pub client connected[39m
[2025-09-09 23:13:57] [32mINFO[39m: [36mâœ… Redis main client ready[39m
[2025-09-09 23:13:57] [32mINFO[39m: [36mâœ… Redis main client connected successfully[39m
[2025-09-09 23:13:57] [32mINFO[39m: [36mğŸ“¡ Redis sub client connected[39m
[2025-09-09 23:13:57] [32mINFO[39m: [36mâœ… Redis sub client ready[39m
[2025-09-09 23:13:57] [32mINFO[39m: [36mâœ… Redis sub client connected successfully[39m
[2025-09-09 23:13:57] [32mINFO[39m: [36mâœ… Redis pub client ready[39m
[2025-09-09 23:13:57] [32mINFO[39m: [36mâœ… Redis pub client connected successfully[39m
[2025-09-09 23:13:57] [31mERROR[39m: [36mâŒ Redis adapter setup failed, continuing without clustering:[39m
[2025-09-09 23:13:57] [32mINFO[39m: [36mğŸš€ Socket.io server configured with crash protection[39m
[2025-09-09 23:13:57] [32mINFO[39m: [36mğŸ”Œ Circuit breakers initialized for critical services[39m
[2025-09-09 23:13:57] [32mINFO[39m: [36mğŸ”’ Event handlers setup with comprehensive crash protection[39m
[2025-09-09 23:13:57] [32mINFO[39m: [36mğŸ§¹ Memory leak prevention system started[39m
[2025-09-09 23:13:57] [32mINFO[39m: [36mğŸ“Š Health monitoring started[39m
[2025-09-09 23:13:57] [32mINFO[39m: [36mğŸ”’ Crash-Safe Socket.io System initialized with zero-crash guarantees[39m
âœ… Auth service dependencies healthy
âœ… OAuth2 clients initialized for: 
âœ… OAuth service initialized with providers: google, discord, github
âœ… OAuth2 clients initialized for: 
âœ… Enhanced upload services initialized successfully
âŒ Failed to initialize Enhanced Media Transcoding Service: Error: FFmpeg not found in PATH
    at ChildProcess.<anonymous> (/home/ubuntu/cryb-platform/apps/api/src/services/enhanced-video-transcoding.ts:231:16)
    at ChildProcess.emit (node:events:518:28)
    at ChildProcess._handle.onexit (node:internal/child_process:291:12)
    at onErrorNT (node:internal/child_process:483:16)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Video transcoding features will be disabled. Install FFmpeg to enable these features.
âœ… Background workers initialized
ğŸš€ CRYB Discord-like API Server started successfully!
ğŸ“¡ Server listening at http://0.0.0.0:3002
ğŸ“š API Documentation available at http://0.0.0.0:3002/documentation
ğŸ” Health checks available at http://0.0.0.0:3002/health
ğŸ“Š Metrics available at http://0.0.0.0:3002/metrics

ğŸ“‹ Environment Configuration:
   - Node.js: v22.18.0
   - Environment: development
   - Database: Connected
   - Redis: Connected
   - MinIO: localhost
   - Elasticsearch: http://localhost:9201
âœ… Auth service dependencies healthy
IMPORTANT! Eviction policy is allkeys-lru. It should be "noeviction"
IMPORTANT! Eviction policy is allkeys-lru. It should be "noeviction"
IMPORTANT! Eviction policy is allkeys-lru. It should be "noeviction"
IMPORTANT! Eviction policy is allkeys-lru. It should be "noeviction"
IMPORTANT! Eviction policy is allkeys-lru. It should be "noeviction"
IMPORTANT! Eviction policy is allkeys-lru. It should be "noeviction"
âœ… Enhanced Auth service dependencies healthy
âœ… Enhanced Auth service dependencies healthy
[2025-09-09 23:13:58] [32mINFO[39m: [36mâœ… Socket service initialized[39m
[2025-09-09 23:13:58] [32mINFO[39m: [36mâœ… Event handlers initialized in socket service[39m
[2025-09-09 23:13:58] [32mINFO[39m: [36mâœ… Event handlers initialized[39m
[2025-09-09 23:13:58] [32mINFO[39m: [36mğŸ“¨ Cleanup intervals setup[39m
[2025-09-09 23:13:58] [32mINFO[39m: [36mğŸ“¨ Redis subscriptions setup[39m
[2025-09-09 23:13:58] [32mINFO[39m: [36mğŸ“¨ Realtime Messaging System initialized[39m
[2025-09-09 23:13:58] [32mINFO[39m: [36mâœ… Messaging system reference set in socket service[39m
[2025-09-09 23:13:58] [32mINFO[39m: [36mâœ… Comprehensive messaging system initialized[39m
[2025-09-09 23:13:58] [32mINFO[39m: [36mğŸ“¨ Real-time messaging features active:[39m
[2025-09-09 23:13:58] [32mINFO[39m: [36m   - Message send/receive with acknowledgments[39m
[2025-09-09 23:13:58] [32mINFO[39m: [36m   - Typing indicators with auto-cleanup[39m
[2025-09-09 23:13:58] [32mINFO[39m: [36m   - Read receipts for messages[39m
[2025-09-09 23:13:58] [32mINFO[39m: [36m   - Room/channel management[39m
[2025-09-09 23:13:58] [32mINFO[39m: [36m   - Presence tracking (online/offline)[39m
[2025-09-09 23:13:58] [32mINFO[39m: [36m   - Message history synchronization[39m
[2025-09-09 23:13:58] [32mINFO[39m: [36m   - Real-time notifications[39m
[2025-09-09 23:13:58] [32mINFO[39m: [36m   - Rate limiting and spam prevention[39m
[2025-09-09 23:13:58] [32mINFO[39m: [36mâœ… Discord-style realtime handler initialized[39m
[2025-09-09 23:13:58] [32mINFO[39m: [36mğŸ”Œ Discord Gateway-compatible events active[39m
[2025-09-09 23:13:58] [32mINFO[39m: [36mğŸ“Š System health monitoring started[39m
[2025-09-09 23:13:58] [32mINFO[39m: [36mğŸ”’ Graceful shutdown handlers registered[39m
[2025-09-09 23:13:58] [32mINFO[39m: [36mğŸ”’ CRASH-SAFE Socket System initialized successfully[39m
[2025-09-09 23:13:58] [32mINFO[39m: [36mğŸ›¡ï¸  Zero-crash guarantees active:[39m
[2025-09-09 23:13:58] [32mINFO[39m: [36m   âœ… Comprehensive error handling[39m
[2025-09-09 23:13:58] [32mINFO[39m: [36m   âœ… Connection retry with exponential backoff[39m
[2025-09-09 23:13:58] [32mINFO[39m: [36m   âœ… Circuit breakers for all services[39m
[2025-09-09 23:13:58] [32mINFO[39m: [36m   âœ… Rate limiting on all events[39m
[2025-09-09 23:13:58] [32mINFO[39m: [36m   âœ… Memory leak prevention[39m
[2025-09-09 23:13:58] [32mINFO[39m: [36m   âœ… Automatic cleanup and recovery[39m
[2025-09-09 23:13:58] [32mINFO[39m: [36m   âœ… Discord-style realtime events[39m
[2025-09-09 23:13:58] [32mINFO[39m: [36mğŸ”’ Socket health endpoints registered[39m
[2025-09-09 23:14:13] [31mERROR[39m: [36mFailed to initialize search indexes:[39m
[2025-09-09 23:14:13] [32mINFO[39m: [36mServer listening at http://127.0.0.1:3002[39m
[2025-09-09 23:14:13] [32mINFO[39m: [36mServer listening at http://172.26.13.67:3002[39m
[2025-09-09 23:14:13] [32mINFO[39m: [36mServer listening at http://172.28.0.1:3002[39m
[2025-09-09 23:14:13] [32mINFO[39m: [36mServer listening at http://172.31.0.1:3002[39m
[2025-09-09 23:14:13] [32mINFO[39m: [36mServer listening at http://172.18.0.1:3002[39m
[2025-09-09 23:14:13] [32mINFO[39m: [36mServer listening at http://172.29.0.1:3002[39m
âœ… Enhanced File Upload Service initialized
[2025-09-09 23:14:57] [32mINFO[39m: [36mğŸ“Š System health:[39m
[2025-09-09 23:15:57] [32mINFO[39m: [36mğŸ“Š System health:[39m
[2025-09-09 23:16:25] [32mINFO[39m: [36mğŸ”„ Received SIGTERM, initiating graceful shutdown...[39m
[2025-09-09 23:16:25] [32mINFO[39m: [36mğŸ”„ Shutting down crash-safe socket system...[39m
[2025-09-09 23:16:25] [32mINFO[39m: [36mğŸ”„ Shutting down crash-safe socket system...[39m
[2025-09-09 23:16:25] [32mINFO[39m: [36mğŸ”„ Shutting down Redis Pub/Sub system...[39m
[2025-09-09 23:16:25] [32mINFO[39m: [36mSIGTERM received, shutting down gracefully...[39m
[2025-09-09 23:16:25] [32mINFO[39m: [36mâœ… Crash-safe socket system shutdown complete[39m
[2025-09-09 23:16:25] [32mINFO[39m: [36mâœ… Redis Pub/Sub system shutdown complete[39m
[2025-09-09 23:16:25] [32mINFO[39m: [36mâœ… Crash-safe socket system shutdown complete[39m
