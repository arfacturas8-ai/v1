port: 7880
bind_addresses:
  - "0.0.0.0"

# Production-ready RTC configuration for Discord-quality voice/video
rtc:
  tcp_port: 7881
  port_range_start: 50000
  port_range_end: 50200  # Increased range for scalability
  use_external_ip: true
  node_ip: ""  # Auto-detect
  ice_servers:
    - urls: ["stun:stun.l.google.com:19302"]  # Google's STUN server
  
# Redis configuration for scaling and state management
redis:
  address: localhost:6380
  password: "cryb_redis_password"
  db: 1

# TURN server configuration for NAT traversal
turn:
  enabled: true
  domain: localhost
  cert_file: ""
  key_file: ""
  tls_port: 5349
  udp_port: 3478
  relay_range_start: 61000
  relay_range_end: 61200
  # Add external TURN servers for production
  external_tls: true

# API Keys for authentication
keys:
  APIHmK7VRxK9Xb5M3PqN8Yz2Fw4Jt6Lp: LkT9Qx3Vm8Sz5Rn2Bp7Wj4Ht6Fg3Cd1

# Room configuration optimized for Discord-style usage with enhanced screen sharing
room:
  max_participants: 100
  empty_timeout: 300  # 5 minutes
  auto_create: true
  enable_recording: false
  
  # Audio optimizations for voice and screen share audio
  audio:
    echo_cancellation: true
    noise_suppression: true
    auto_gain_control: true
    sample_rate: 48000
    channels: 2
    bitrate_ranges:
      - bitrate: 32000   # Low quality
        sample_rate: 16000
      - bitrate: 128000  # Standard quality
        sample_rate: 48000
      - bitrate: 320000  # High quality
        sample_rate: 48000
  
  # Video optimizations including screen share support
  video:
    max_resolution: "1440p"  # Support higher resolution for screen sharing
    adaptive_bitrate: true
    simulcast: true
    max_framerate: 60  # Higher framerate for smooth screen sharing
    codecs: ["h264", "vp8", "vp9", "av1"]
    
    # Screen share specific optimizations
    screen_share:
      max_resolution: "1440p"
      max_framerate: 30
      prefer_temporal_layers: true
      adaptive_layers: true
      
    # Camera video settings
    camera:
      max_resolution: "1080p"
      max_framerate: 30
      
    # Bitrate ranges for different qualities
    bitrate_ranges:
      - resolution: "240p"
        max_bitrate: 150000
      - resolution: "360p"
        max_bitrate: 300000
      - resolution: "720p"
        max_bitrate: 1500000
      - resolution: "1080p"
        max_bitrate: 2500000
      - resolution: "1440p"
        max_bitrate: 4000000

webhook:
  api_key: APIHmK7VRxK9Xb5M3PqN8Yz2Fw4Jt6Lp
  urls:
    - http://localhost:3002/api/v1/voice/webhook
    - http://api:3002/api/v1/voice/webhook

logging:
  level: info
  pion_level: warn

development: true

